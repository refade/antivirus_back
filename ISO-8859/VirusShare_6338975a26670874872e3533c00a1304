// Copyright (c) 2009, Baidu Inc. All rights reserved.
// 
// Licensed under the BSD License
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
// 
//      http:// tangram.baidu.com/license.html
// 
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
/* BASE: baidu.js */
/** @namespace */

baidu.ui=baidu.ui||{version:'1.3.9'};baidu.ui.getUI=function(uiType){var uiType=uiType.split('-'),result=baidu.ui,len=uiType.length,i=0;for(;i<len;i++){result=result[uiType[i].charAt(0).toUpperCase()+uiType[i].slice(1)];}
return result;};baidu.ui.create=function(UI,options){if(baidu.lang.isString(UI)){UI=baidu.ui.getUI(UI);}
return new UI(options);};baidu.ui.Base={id:"",getId:function(key){var ui=this,idPrefix;idPrefix="tangram-"+ui.uiType+'--'+(ui.id?ui.id:ui.guid);return key?idPrefix+"-"+key:idPrefix;},getClass:function(key){var me=this,className=me.classPrefix,skinName=me.skin;if(key){className+='-'+key;skinName+='-'+key;}
if(me.skin){className+=' '+skinName;}
return className;},getMain:function(){return baidu.g(this.mainId);},getBody:function(){return baidu.g(this.getId());},uiType:"",getCallRef:function(){return"window['$BAIDU$']._instances['"+this.guid+"']";},getCallString:function(fn){var i=0,arg=Array.prototype.slice.call(arguments,1),len=arg.length;for(;i<len;i++){if(typeof arg[i]=='string'){arg[i]="'"+arg[i]+"'";}}
return this.getCallRef()+'.'+fn+'('+arg.join(',')+');';},on:function(element,type,listener){baidu.on(element,type,listener);this.addEventListener("ondispose",function(){baidu.un(element,type,listener);});},renderMain:function(main){var ui=this,i=0,len;if(ui.getMain()){return;}
main=baidu.g(main);if(!main){main=document.createElement('div');document.body.appendChild(main);main.style.position="absolute";main.className=ui.getClass("main");}
if(!main.id){main.id=ui.getId("main");}
ui.mainId=main.id;main.setAttribute('data-guid',ui.guid);return main;},dispose:function(){this.dispatchEvent("dispose");baidu.lang.Class.prototype.dispose.call(this);}};baidu.ui.createUI=function(constructor,options){options=options||{};var superClass=options.superClass||baidu.lang.Class,lastInherit=superClass==baidu.lang.Class?1:0,i,n,ui=function(opt,_isInherits){var me=this;opt=opt||{};superClass.call(me,!lastInherit?opt:(opt.guid||""),true);baidu.object.extend(me,ui.options);baidu.object.extend(me,opt);me.classPrefix=me.classPrefix||"tangram-"+me.uiType.toLowerCase();for(i in baidu.ui.behavior){if(typeof me[i]!='undefined'&&me[i]){baidu.object.extend(me,baidu.ui.behavior[i]);if(baidu.lang.isFunction(me[i])){me.addEventListener("onload",function(){baidu.ui.behavior[i].call(me[i].apply(me));});}else{baidu.ui.behavior[i].call(me);}}}
constructor.apply(me,arguments);for(i=0,n=ui._addons.length;i<n;i++){ui._addons[i](me);}
if(opt.parent&&me.setParent){me.setParent(opt.parent);}
if(!_isInherits&&opt.autoRender){me.render(opt.element);}},C=function(){};C.prototype=superClass.prototype;var proto=ui.prototype=new C();for(i in baidu.ui.Base){proto[i]=baidu.ui.Base[i];}
ui.extend=function(json){for(i in json){ui.prototype[i]=json[i];}
return ui;};ui._addons=[];ui.register=function(f){if(typeof f=="function")
ui._addons.push(f);};ui.options={};return ui;};baidu.ui.behavior=baidu.ui.behavior||{};(function(){var Statable=baidu.ui.behavior.statable=function(){var me=this;me.addEventListeners('ondisable,onenable',function(event,options){var element,group;options=options||{};elementId=(options.element||me.getMain()).id;group=options.group;if(event.type=='ondisable'&&!me.getState(elementId,group)['disabled']){me.removeState('press',elementId,group);me.removeState('hover',elementId,group);me.setState('disabled',elementId,group);}else if(event.type=='onenable'&&me.getState(elementId,group)['disabled']){me.removeState('disabled',elementId,group);}});};Statable._states={};Statable._allStates=['hover','press','disabled'];Statable._allEventsName=['mouseover','mouseout','mousedown','mouseup'];Statable._eventsHandler={'mouseover':function(id,group){var me=this;if(!me.getState(id,group)['disabled']){me.setState('hover',id,group);return true;}},'mouseout':function(id,group){var me=this;if(!me.getState(id,group)['disabled']){me.removeState('hover',id,group);me.removeState('press',id,group);return true;}},'mousedown':function(id,group){var me=this;if(!me.getState(id,group)['disabled']){me.setState('press',id,group);return true;}},'mouseup':function(id,group){var me=this;if(!me.getState(id,group)['disabled']){me.removeState('press',id,group);return true;}}};Statable._getStateHandlerString=function(group,key){var me=this,i=0,len=me._allEventsName.length,ret=[],eventType;if(typeof group=='undefined'){group=key='';}
for(;i<len;i++){eventType=me._allEventsName[i];ret[i]='on'+eventType+'=\"'+me.getCallRef()+"._fireEvent('"+eventType+"', '"+group+"', '"+key+"', event)\"";}
return ret.join(' ');};Statable._fireEvent=function(eventType,group,key,e){var me=this,id=me.getId(group+key);if(me._eventsHandler[eventType].call(me,id,group)){me.dispatchEvent(eventType,{element:id,group:group,key:key,DOMEvent:e});}};Statable.addState=function(state,eventName,eventHandler){var me=this;me._allStates.push(state);if(eventName){me._allEventsName.push(eventName);if(!eventHandler){eventHandler=function(){return true;};}
me._eventsHandler[eventName]=eventHandler;}};Statable.getState=function(elementId,group){var me=this,_states;group=group?group+'-':'';elementId=elementId?elementId:me.getId();_states=me._states[group+elementId];return _states?_states:{};};Statable.setState=function(state,elementId,group){var me=this,stateId,currentState;group=group?group+'-':'';elementId=elementId?elementId:me.getId();stateId=group+elementId;me._states[stateId]=me._states[stateId]||{};currentState=me._states[stateId][state];if(!currentState){me._states[stateId][state]=1;baidu.addClass(elementId,me.getClass(group+state));}};Statable.removeState=function(state,elementId,group){var me=this,stateId;group=group?group+'-':'';elementId=elementId?elementId:me.getId();stateId=group+elementId;if(me._states[stateId]){me._states[stateId][state]=0;baidu.removeClass(elementId,me.getClass(group+state));}};})();baidu.ui.Base.setParent=function(parent){var me=this,oldParent=me._parent;oldParent&&oldParent.dispatchEvent("removechild");if(parent.dispatchEvent("appendchild",{child:me})){me._parent=parent;}};baidu.ui.Base.getParent=function(){return this._parent||null;};baidu.ui.Button=baidu.ui.createUI(new Function).extend({uiType:'button',tplBody:'<div id="#{id}" #{statable} class="#{class}">#{content}</div>',disabled:false,statable:true,_getString:function(){var me=this;return baidu.format(me.tplBody,{id:me.getId(),statable:me._getStateHandlerString(),'class':me.getClass(),content:me.content});},render:function(target){var me=this,body;me.addState('click','click');baidu.dom.insertHTML(me.renderMain(target),'beforeEnd',me._getString());body=baidu.g(target).lastChild;if(me.title){body.title=me.title;}
me.disabled&&me.setState('disabled');me.dispatchEvent('onload');},isDisabled:function(){var me=this,id=me.getId();return me.getState()['disabled'];},dispose:function(){var me=this,body=me.getBody();me.dispatchEvent('dispose');baidu.each(me._allEventsName,function(item,index){body['on'+item]=null;});baidu.dom.remove(body);me.dispatchEvent('ondispose');baidu.lang.Class.prototype.dispose.call(me);},disable:function(){var me=this,body=me.getBody();me.dispatchEvent('ondisable',{element:body});},enable:function(){var me=this;body=me.getBody();me.dispatchEvent('onenable',{element:body});},fire:function(eventType,e){var me=this,eventType=eventType.toLowerCase();if(me.getState()['disabled']){return;}
me._fireEvent(eventType,null,null,e);},update:function(options){var me=this;baidu.extend(me,options);options.content&&(me.getBody().innerHTML=options.content);me.dispatchEvent('onupdate');}});baidu.ui.Button.register(function(me){if(!me.poll){return;}
baidu.lang.isBoolean(me.poll)&&(me.poll={});me.addEventListener('mousedown',function(evt){var pollIdent=0,interval=me.poll.interval||100,timer=me.poll.time||0;(function(){if(me.getState()['press']){pollIdent++>timer&&me.onmousedown&&me.onmousedown();me.poll.timeOut=setTimeout(arguments.callee,interval);}})();});me.addEventListener('dispose',function(){if(me.poll.timeOut){me.disable();window.clearTimeout(me.poll.timeOut);}});});baidu.i18n=baidu.i18n||{};baidu.i18n.cultures=baidu.i18n.cultures||{};baidu.i18n.cultures['zh-CN']=baidu.object.extend(baidu.i18n.cultures['zh-CN']||{},{calendar:{dateFormat:'yyyy-MM-dd',titleNames:'#{yyyy}年&nbsp;#{MM}月',monthNames:['一','二','三','四','五','六','七','八','九','十','十一','十二'],dayNames:{mon:'一',tue:'二',wed:'三',thu:'四',fri:'五',sat:'六',sun:'日'}},timeZone:8,whitespace:new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g"),number:{group:",",groupLength:3,decimal:".",positive:"",negative:"-",_format:function(number,isNegative){return baidu.i18n.number._format(number,{group:this.group,groupLength:this.groupLength,decimal:this.decimal,symbol:isNegative?this.negative:this.positive});}},currency:{symbol:'￥'},language:{ok:'确定',cancel:'取消',signin:'注册',signup:'登录'}});baidu.i18n.currentLocale=baidu.i18n.currentLocale||'zh-CN';baidu.i18n.date=baidu.i18n.date||{getDaysInMonth:function(year,month){var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(month==1&&baidu.i18n.date.isLeapYear(year)){return 29;}
return days[month];},isLeapYear:function(year){return!(year%400)||(!(year%4)&&!!(year%100));},toLocaleDate:function(dateObject,sLocale,tLocale){return this._basicDate(dateObject,sLocale,tLocale||baidu.i18n.currentLocale);},_basicDate:function(dateObject,sLocale,tLocale){var tTimeZone=baidu.i18n.cultures[tLocale||baidu.i18n.currentLocale].timeZone,tTimeOffset=tTimeZone*60,sTimeZone,sTimeOffset,millisecond=dateObject.getTime();if(sLocale){sTimeZone=baidu.i18n.cultures[sLocale].timeZone;sTimeOffset=sTimeZone*60;}else{sTimeOffset=-1*dateObject.getTimezoneOffset();sTimeZone=sTimeZone/60;}
return new Date(sTimeZone!=tTimeZone?(millisecond+(tTimeOffset-sTimeOffset)*60000):millisecond);}};baidu.ui.Calendar=baidu.ui.createUI(function(options){var me=this;me.flipContent=baidu.object.extend({prev:'&lt;',next:'&gt;'},me.flipContent);me.addEventListener('mouseup',function(evt){var ele=evt.element,date=me._dates[ele],beforeElement=baidu.dom.g(me._currElementId);beforeElement&&baidu.dom.removeClass(beforeElement,me.getClass('date-current'));me._currElementId=ele;me._initDate=date;baidu.dom.addClass(baidu.dom.g(ele),me.getClass('date-current'));me.dispatchEvent('clickdate',{date:date});});}).extend({uiType:'calendar',weekStart:'Sun',statable:true,language:'zh-CN',tplDOM:'<div id="#{id}" class="#{class}">#{content}</div>',tplTable:'<table border="0" cellpadding="0" cellspacing="1" class="#{class}"><thead class="#{headClass}">#{head}</thead><tbody class="#{bodyClass}">#{body}</tbody></table>',tplDateCell:'<td id="#{id}" class="#{class}" #{handler}>#{content}</td>',tplTitle:'<div id="#{id}" class="#{class}"><div id="#{labelId}" class="#{labelClass}">#{text}</div><div id="#{prevId}" class="#{prevClass}"></div><div id="#{nextId}" class="#{nextClass}"></div></div>',_initialize:function(){var me=this;function initDate(array){var arr=[];baidu.array.each(array,function(item){arr.push(baidu.lang.isDate(item)?me._toLocalDate(item):{start:me._toLocalDate(item.start),end:me._toLocalDate(item.end)});});return arr;}
me._highlightDates=initDate(me.highlightDates||[]);me._disableDates=initDate(me.disableDates||[]);me._initDate=me._toLocalDate(me.initDate||new Date());me._currDate=new Date(me._initDate.getTime());me.weekStart=me.weekStart.toLowerCase();},_getDateJson:function(date){var me=this,guid=baidu.lang.guid(),curr=me._currDate,css=[],disabled;function compare(srcDate,compDate){return srcDate.getDate()==compDate.getDate()&&Math.abs(srcDate.getTime()-compDate.getTime())<24*60*60*1000;}
function contains(array,date){var time=date.getTime();return baidu.array.some(array,function(item){if(baidu.lang.isDate(item)){return compare(item,date);}else{return compare(item.start,date)||time>item.start.getTime()&&time<=item.end.getTime();}});}
date.getMonth()!=curr.getMonth()&&css.push(me.getClass('date-other'));contains(me._highlightDates,date)&&css.push(me.getClass('date-highlight'));if(compare(me._initDate,date)){css.push(me.getClass('date-current'));me._currElementId=me.getId(guid);}
compare(me._toLocalDate(new Date()),date)&&css.push(me.getClass('date-today'));disabled=contains(me._disableDates,date)&&(css=[]);return{id:me.getId(guid),'class':css.join('\x20'),handler:me._getStateHandlerString('',guid),date:date,disabled:disabled};},_getMonthCount:function(year,month){var invoke=baidu.i18n.date.getDaysInMonth,monthArr=[31,28,31,30,31,30,31,31,30,31,30,31],count;invoke&&(count=invoke(year,month));if(!baidu.lang.isNumber(count)){count=1==month&&(year%4)&&(year%100!=0||year%400==0)?29:monthArr[month];}
return count;},_getDateTableString:function(){var me=this,calendar=baidu.i18n.cultures[me.language].calendar,dayArr=['sun','mon','tue','wed','thu','fri','sat'],curr=me._currDate,year=curr.getFullYear(),month=curr.getMonth(),day=new Date(year,month,1).getDay(),weekIndex=0,headArr=[],bodyArr=[],weekArray=[],disabledIds=me._disabledIds=[],i=0,j=0,len=dayArr.length,count,date;for(;i<len;i++){dayArr[i]==me.weekStart&&(weekIndex=i);(weekIndex>0?headArr:weekArray).push('<td>',calendar.dayNames[dayArr[i]],'</td>');}
headArr=headArr.concat(weekArray);headArr.unshift('<tr>');headArr.push('</tr>');day=(day<weekIndex?day+7:day)-weekIndex;count=Math.ceil((me._getMonthCount(year,month)+day)/len);me._dates={};for(i=0;i<count;i++){bodyArr.push('<tr>');for(j=0;j<len;j++){date=me._getDateJson(new Date(year,month,i*len+j+1-day));me._dates[date.id]=date.date;date.disabled&&disabledIds.push(date['id']);bodyArr.push(baidu.string.format(me.tplDateCell,{id:date['id'],'class':date['class'],handler:date['handler'],content:date['date'].getDate()}));}
bodyArr.push('</tr>');}
return baidu.string.format(me.tplTable,{'class':me.getClass('table'),headClass:me.getClass('week'),bodyClass:me.getClass('date'),head:headArr.join(''),body:bodyArr.join('')});},getString:function(){var me=this;return baidu.string.format(me.tplDOM,{id:me.getId(),'class':me.getClass(),content:baidu.string.format(me.tplDOM,{id:me.getId('content'),'class':me.getClass('content')})});},_toLocalDate:function(date){return date?baidu.i18n.date.toLocaleDate(date,null,this.language):date;},_renderDate:function(){var me=this;baidu.dom.g(me.getId('content')).innerHTML=me._getDateTableString();baidu.array.each(me._disabledIds,function(item){me.setState('disabled',item);});},_basicFlipMonth:function(pos){var me=this,curr=me._currDate,month=curr.getMonth()+(pos=='prev'?-1:1),year=curr.getFullYear()+(month<0?-1:(month>11?1:0));month=month<0?12:(month>11?0:month);curr.setYear(year);me.gotoMonth(month);me.dispatchEvent(pos+'month',{date:new Date(curr.getTime())});},renderTitle:function(){var me=this,prev,next,curr=me._currDate,calendar=baidu.i18n.cultures[me.language].calendar,ele=baidu.dom.g(me.getId('label')),txt=baidu.string.format(calendar.titleNames,{yyyy:curr.getFullYear(),MM:calendar.monthNames[curr.getMonth()],dd:curr.getDate()});if(ele){ele.innerHTML=txt;return;}
baidu.dom.insertHTML(me.getBody(),'afterBegin',baidu.string.format(me.tplTitle,{id:me.getId('title'),'class':me.getClass('title'),labelId:me.getId('label'),labelClass:me.getClass('label'),text:txt,prevId:me.getId('prev'),prevClass:me.getClass('prev'),nextId:me.getId('next'),nextClass:me.getClass('next')}));function getOptions(pos){return{classPrefix:me.classPrefix+'-'+pos+'btn',skin:me.skin?me.skin+'-'+pos:'',content:me.flipContent[pos],poll:{time:4},element:me.getId(pos),autoRender:true,onmousedown:function(){me._basicFlipMonth(pos);}};}
prev=new baidu.ui.Button(getOptions('prev'));next=new baidu.ui.Button(getOptions('next'));me.addEventListener('ondispose',function(){prev.dispose();next.dispose();});},render:function(target){var me=this,skin=me.skin;if(!target||me.getMain()){return;}
baidu.dom.insertHTML(me.renderMain(target),'beforeEnd',me.getString());me._initialize();me.renderTitle();me._renderDate();baidu.dom.g(me.getId('content')).style.height=(me.getBody().clientHeight||me.getBody().offsetHeight)-baidu.dom.g(me.getId('title')).offsetHeight+'px';me.dispatchEvent('onload');},update:function(options){var me=this;baidu.object.extend(me,options||{});me._initialize();me.renderTitle();me._renderDate();me.dispatchEvent('onupdate');},gotoDate:function(date){var me=this;me._currDate=me._toLocalDate(date);me._initDate=me._toLocalDate(date);me.renderTitle();me._renderDate();me.dispatchEvent('ongotodate');},gotoYear:function(year){var me=this,curr=me._currDate,month=curr.getMonth(),date=curr.getDate(),count;if(1==month){count=me._getMonthCount(year,month);date>count&&curr.setDate(count);}
curr.setFullYear(year);me.renderTitle();me._renderDate();me.dispatchEvent('ongotoyear');},gotoMonth:function(month){var me=this,curr=me._currDate,month=Math.min(Math.max(month,0),11),date=curr.getDate(),count=me._getMonthCount(curr.getFullYear(),month);date>count&&curr.setDate(count);curr.setMonth(month);me.renderTitle();me._renderDate();me.dispatchEvent('ongotomonth');},getToday:function(){return me._toLocalDate(new Date());},getDate:function(){return new Date(this._initDate.getTime());},setDate:function(date){if(baidu.lang.isDate(date)){var me=this;me._initDate=date;me._currDate=date;}},prevMonth:function(){this._basicFlipMonth('prev');},nextMonth:function(){this._basicFlipMonth('next');},dispose:function(){var me=this;me.dispatchEvent('dispose');baidu.dom.remove(me.getMain());baidu.lang.Class.prototype.dispose.call(me);}});baidu.ui.Popup=baidu.ui.createUI(function(options){}).extend({uiType:"popup",width:'',height:'',top:'auto',left:'auto',zIndex:1200,contentText:'',onbeforeclose:function(){return true},tplBody:"<div id='#{id}' class='#{class}' style='position:relative; top:0px; left:0px;'></div>",isShown:function(){return baidu.ui.Popup.instances[this.guid]=='show';},getString:function(){var me=this;return baidu.format(me.tplBody,{id:me.getId(),"class":me.getClass()});},render:function(){var me=this,main;if(me.getMain()){return;}
main=me.renderMain();main.innerHTML=me.getString();me._update(me);baidu.dom.setStyles(me.getMain(),{position:"absolute",zIndex:me.zIndex,marginLeft:"-100000px"});me.dispatchEvent("onload");return main;},open:function(options){var me=this;me._update(options);me.getMain().style.marginLeft="auto";baidu.ui.Popup.instances[me.guid]="show";me.dispatchEvent("onopen");},close:function(){var me=this;if(me.dispatchEvent("onbeforeclose")){me.getMain().style.marginLeft="-100000px";baidu.ui.Popup.instances[me.guid]="hide";me.dispatchEvent("onclose");}},update:function(options){var me=this;me._update(options);me.dispatchEvent("onupdate");},_update:function(options){options=options||{};var me=this,contentWrapper=me.getBody();baidu.object.extend(me,options);if(options.content){if(contentWrapper.firstChild!=options.content){contentWrapper.innerHTML="";contentWrapper.appendChild(options.content);}}else if(options.contentText){contentWrapper.innerHTML=options.contentText;}
me._updateSize();me._updatePosition();},_updateSize:function(){var me=this;baidu.dom.setStyles(me.getMain(),{width:me.width,height:me.height});},_updatePosition:function(){var me=this;baidu.dom.setStyles(me.getMain(),{top:me.top,left:me.left});},dispose:function(){var me=this;me.dispatchEvent("ondispose");baidu.dom.remove(me.getMain());baidu.lang.Class.prototype.dispose.call(me);}});baidu.ui.Popup.instances=baidu.ui.Popup.instances||[];(function(){var Coverable=baidu.ui.behavior.coverable=function(){};Coverable.Coverable_isShowing=false;Coverable.Coverable_iframe;Coverable.Coverable_container;Coverable.Coverable_iframeContainer;Coverable.Coverable_show=function(){var me=this;if(me.Coverable_iframe){me.Coverable_update();baidu.setStyle(me.Coverable_iframe,'display','block');return;}
var opt=me.coverableOptions||{},container=me.Coverable_container=opt.container||me.getMain(),opacity=opt.opacity||'0',color=opt.color||'',iframe=me.Coverable_iframe=document.createElement('iframe'),iframeContainer=me.Coverable_iframeContainer=document.createElement('div');baidu.dom.children(container).length>0?baidu.dom.insertBefore(iframeContainer,container.firstChild):container.appendChild(iframeContainer);baidu.setStyles(iframeContainer,{position:'absolute',top:'0px',left:'0px'});baidu.dom.setBorderBoxSize(iframeContainer,{width:container.offsetWidth,height:container.offsetHeight});baidu.dom.setBorderBoxSize(iframe,{width:iframeContainer.offsetWidth});baidu.dom.setStyles(iframe,{zIndex:-1,display:"block",border:0,backgroundColor:color,filter:'progid:DXImageTransform.Microsoft.Alpha(style=0,opacity='+opacity+')'});iframeContainer.appendChild(iframe);iframe.src="javascript:void(0)";iframe.frameBorder='0';iframe.scrolling='no';iframe.height='97%';me.Coverable_isShowing=true;};Coverable.Coverable_hide=function(){var me=this,iframe=me.Coverable_iframe;if(!me.Coverable_isShowing){return;}
baidu.setStyle(iframe,'display','none');me.Coverable_isShowing=false;};Coverable.Coverable_update=function(options){var me=this,options=options||{},container=me.Coverable_container,iframeContainer=me.Coverable_iframeContainer,iframe=me.Coverable_iframe;baidu.dom.setBorderBoxSize(iframeContainer,{width:container.offsetWidth,height:container.offsetHeight});baidu.dom.setBorderBoxSize(iframe,baidu.extend({width:baidu.getStyle(iframeContainer,'width')},options));};})();baidu.extend(baidu.ui.Popup.prototype,{coverable:true,coverableOptions:{}});baidu.ui.Popup.register(function(me){if(me.coverable){me.addEventListeners("onopen,onload",function(){me.Coverable_show();});me.addEventListener("onclose",function(){me.Coverable_hide();});me.addEventListener("onupdate",function(){me.Coverable_update();});}});baidu.ui.DatePicker=baidu.ui.createUI(function(options){var me=this;me.format=me.format||baidu.i18n.cultures[me.language].calendar.dateFormat||'yyyy-MM-dd';me.popupOptions=baidu.object.merge(me.popupOptions||{},options,{overwrite:true,whiteList:['width','height']});me.calendarOptions=baidu.object.merge(me.calendarOptions||{},options,{overwrite:true,whiteList:['weekStart']});me._popup=new baidu.ui.Popup(me.popupOptions);me._calendar=new baidu.ui.Calendar(me.calendarOptions);me._calendar.addEventListener('clickdate',function(evt){me.pick(evt.date);});}).extend({uiType:'datePicker',language:'zh-CN',_getInputDate:function(){var me=this,patrn=[/yyyy|yy/,/M{1,2}/,/d{1,2}/],key=[],val={},count=patrn.length,i=0,regExp;for(;i<count;i++){regExp=patrn[i].exec(me.format);key[i]=regExp?regExp.index:null;}
me.input.value.replace(/\d{1,4}/g,function(mc,index){val[index]=mc;});for(i=0;i<key.length;i++){key[i]=val[key[i]];if(!key[i]){return;}}
return new Date(key[0],key[1]-1,key[2]);},_onMouseDown:function(evt){var me=this,popup=me._popup,target=baidu.event.getTarget(evt);if(target.id!=me.input.id&&!baidu.dom.contains(popup.getBody(),target)){me.hide();}},render:function(target){var me=this,focusHandler=baidu.fn.bind('show',me),mouseHandler=baidu.fn.bind('_onMouseDown',me),keyHandler=baidu.fn.bind('hide',me),input=me.input=baidu.dom.g(target),popup=me._popup;if(me.getMain()||!input){return;}
popup.render();me._calendar.render(popup.getBody());me.on(input,'focus',focusHandler);me.on(input,'keyup',keyHandler);me.on(document,'click',mouseHandler);},pick:function(date){var me=this;me.input.value=baidu.date.format(date,me.format);me.hide();me.dispatchEvent('pick');},show:function(){var me=this,pos=me.input&&baidu.dom.getPosition(me.input),popup=me._popup,calendar=me._calendar,doc=document[baidu.browser.isStrict?'documentElement':'body'],inputHeight=me.input.offsetHeight,popupHeight=me._popup.getBody().offsetHeight;me._calendar.setDate(me._getInputDate()||calendar._toLocalDate(new Date()));me._calendar.renderTitle();me._calendar._renderDate();pos.top+=(pos.top+inputHeight+popupHeight-doc.scrollTop>doc.clientHeight)?-popupHeight:inputHeight;me._popup.open(pos);},hide:function(){this._popup.close();},dispose:function(){var me=this;me.dispatchEvent('dispose');me._calendar.dispose();me._popup.dispose();baidu.lang.Class.prototype.dispose.call(me);}});baidu.ui.Dialog=baidu.ui.createUI(function(options){var me=this;me._content='initElement';me.content=me.content||null;me._contentText='initText';me.contentText=me.contentText||'';me._titleText='initText';me.titleText=me.titleText||'';}).extend({uiType:'dialog',width:'',height:'',top:'auto',left:'auto',zIndex:1000,tplDOM:"<div id='#{id}' class='#{class}' style='position:relative'>#{title}#{content}#{footer}</div>",tplTitle:"<div id='#{id}' class='#{class}'><span id='#{inner-id}' class='#{inner-class}'>#{content}</span></div>",tplContent:"<div id='#{id}' class='#{class}' style='overflow:hidden; position:relative'>#{content}</div>",tplFooter:"<div id='#{id}' class='#{class}'></div>",isShown:function(){return baidu.ui.Dialog.instances[this.guid]=='show';},getString:function(){var me=this,html,title='title',titleInner='title-inner',content='content',footer='footer';return baidu.format(me.tplDOM,{id:me.getId(),'class':me.getClass(),title:baidu.format(me.tplTitle,{id:me.getId(title),'class':me.getClass(title),'inner-id':me.getId(titleInner),'inner-class':me.getClass(titleInner),content:me.titleText||''}),content:baidu.format(me.tplContent,{id:me.getId(content),'class':me.getClass(content),content:me.contentText||''}),footer:baidu.format(me.tplFooter,{id:me.getId(footer),'class':me.getClass(footer)})});},render:function(){var me=this,main;if(me.getMain()){return;}
main=me.renderMain();main.innerHTML=me.getString();me._update();me._updatePosition();baidu.dom.setStyles(me.getMain(),{position:'absolute',zIndex:me.zIndex,marginLeft:'-100000px'});me.windowResizeHandler=me.getWindowResizeHandler();baidu.on(window,'resize',me.windowResizeHandler);me.dispatchEvent('onload');return main;},_update:function(options){var me=this,content=me.getContent(),options=options||{},title=me.getTitleInner(),setText=false;if(typeof options.titleText!='undefined'){title.innerHTML=options.titleText;me.titleText=me._titleText=options.titleText;}else if(me.titleText!=me._titleText){title.innerHTML=me.titleText;me._titleText=me.titleText;}
if(typeof options.content!='undefined'){content.innerHTML='';me.content=options.content;if(options.content!==null){content.appendChild(options.content);me.content=me._content=content.firstChild;me.contentText=me._contentText=content.innerHTML;return;}
setText=true;}else if(me.content!==me._content){content.innerHTML='';if(me.content!==null){content.appendChild(me.content);me.content=me._content=content.firstChild;me.contentText=me._contentText=content.innerHTML;return;}
setText=true;}
if(typeof options.contentText!='undefined'){content.innerHTML=options.contentText;me.contentText=me._contentText=options.contentText;me.content=me._content=content.firstChild;}else if((me.contentText!=me._contentText)||setText){content.innerHTML=me.contentText;me._contentText=me.contentText;me.content=me._content=content.firstChild;}
delete(options.content);delete(options.contentText);delete(options.titleText);baidu.extend(me,options);},getWindowResizeHandler:function(){var me=this;return function(){me._updatePosition();};},open:function(){var me=this;me._updatePosition();me.getMain().style.marginLeft='auto';baidu.ui.Dialog.instances[me.guid]='show';me.dispatchEvent('onopen');},close:function(){var me=this;if(me.dispatchEvent('onbeforeclose')){me.getMain().style.marginLeft='-100000px';baidu.ui.Dialog.instances[me.guid]='hide';me.dispatchEvent('onclose');}},update:function(options){var me=this;me._update(options);me._updatePosition();me.dispatchEvent('onupdate');},_getBodyOffset:function(){var me=this,bodyOffset,body=me.getBody(),content=me.getContent(),title=me.getTitle(),footer=me.getFooter();bodyOffset={'width':0,'height':0};function getStyleNum(d,style){var result=parseFloat(baidu.getStyle(d,style));result=isNaN(result)?0:result;result=baidu.lang.isNumber(result)?result:0;return result;}
baidu.each(['marginLeft','marginRight'],function(item,index){bodyOffset['width']+=getStyleNum(content,item);});bodyOffset['height']+=title.offsetHeight+getStyleNum(title,'marginTop');bodyOffset['height']+=footer.offsetHeight+getStyleNum(footer,'marginBottom');var mt=getStyleNum(content,'marginTop'),md=getStyleNum(title,'marginBottom');bodyOffset['height']+=mt>=md?mt:md;mt=getStyleNum(footer,'marginTop'),md=getStyleNum(content,'marginBottom');bodyOffset['height']+=mt>=md?mt:md;return bodyOffset;},_updatePosition:function(){var me=this,bodyOffset,top='',right='',bottom='',left='',content=me.getContent(),body=me.getBody(),width,height;width=parseFloat(me.width);height=parseFloat(me.height);bodyOffset=me._getBodyOffset();baidu.lang.isNumber(width)&&baidu.dom.setOuterWidth(content,width);baidu.lang.isNumber(height)&&baidu.dom.setOuterHeight(content,height);bodyOffset.width+=content.offsetWidth;bodyOffset.height+=content.offsetHeight;me.width&&baidu.setStyle(body,'width',bodyOffset.width);me.height&&baidu.setStyle(body,'height',bodyOffset.height);if((me.left&&me.left!='auto')||(me.right&&me.right!='auto')){left=me.left||'';right=me.right||'';}else{left=Math.max((baidu.page.getViewWidth()-parseFloat(me.getMain().offsetWidth))/2+baidu.page.getScrollLeft(),0);}
if((me.top&&me.top!='auto')||(me.bottom&&me.bottom!='auto')){top=me.top||'';bottom=me.bottom||'';}else{top=Math.max((baidu.page.getViewHeight()-parseFloat(me.getMain().offsetHeight))/2+baidu.page.getScrollTop(),0);}
baidu.dom.setStyles(me.getMain(),{top:top,right:right,bottom:bottom,left:left});},getTitle:function(){return baidu.g(this.getId('title'));},getTitleInner:function(){return baidu.g(this.getId('title-inner'));},getContent:function(){return baidu.g(this.getId('content'));},getFooter:function(){return baidu.g(this.getId('footer'));},dispose:function(){var me=this;delete baidu.ui.Dialog.instances[me.guid];me.dispatchEvent('dispose');baidu.un(window,'resize',me.windowResizeHandler);baidu.dom.remove(me.getMain());baidu.lang.Class.prototype.dispose.call(me);}});baidu.ui.Dialog.instances=baidu.ui.Dialog.instances||{};baidu.ui.Dialog.register(function(me){me.addEventListener("onload",function(){if(typeof me.autoDispose=='undefined'||me.autoDispose){me.addEventListener('onclose',function(){me.dispose();});}});});baidu.i18n.string=baidu.i18n.string||{trim:function(source,locale){var pat=baidu.i18n.cultures[locale||baidu.i18n.currentLocale].whitespace;return String(source).replace(pat,"");},translation:function(source,locale){var tOpt=baidu.i18n.cultures[locale||baidu.i18n.currentLocale].language;return tOpt[source]||'';}};baidu.extend(baidu.ui.Dialog.prototype,{createButton:function(option,name){var me=this;baidu.extend(option,{classPrefix:me.classPrefix+"-"+name,skin:me.skin?me.skin+"-"+name:"",element:me.getFooter(),autoRender:true,parent:me});var buttonInstance=new baidu.ui.Button(option);me.buttonInstances[name]=buttonInstance;},removeButton:function(name){var me=this,button=me.buttonInstances[name];if(button){button.dispose();delete(me.buttonInstances[name]);delete(me.buttons[name]);}}});baidu.ui.Dialog.register(function(me){me.buttonInstances={};me.language=me.language||'zh-CN';var accept,cancel,tmpButtons={},language=baidu.i18n.cultures[me.language].language;accept={'content':language['ok'],'onclick':function(){var me=this,parent=me.getParent();parent.dispatchEvent('onaccept')&&parent.close();}};cancel={'content':language['cancel'],'onclick':function(){var me=this,parent=me.getParent();parent.dispatchEvent('oncancel')&&parent.close();}};me.addEventListener("onload",function(){switch(me.type){case"alert":me.submitOnEnter=me.submitOnEnter||true;tmpButtons={accept:accept};break;case"confirm":me.submitOnEnter=me.submitOnEnter||true;tmpButtons={accept:accept,cancel:cancel};break;default:}
me.buttons=baidu.extend(tmpButtons,me.buttons||{});baidu.object.each(me.buttons,function(opt,name){me.createButton(opt,name);});me.submitOnEnter&&me.addEventListener('onenter',function(e){me.buttonInstances['accept'].fire('click',e);});});me.addEventListener("ondispose",function(){baidu.object.each(me.buttons,function(opt,name){me.removeButton(name);});});me.addEventListener("onupdate",function(){baidu.object.each(me.buttons,function(opt,name){me.buttonInstances[name]?me.buttonInstances[name].update(opt):me.createButton(opt,name);});});});baidu.extend(baidu.ui.Dialog.prototype,{closeText:"",closeButton:true});baidu.ui.Dialog.register(function(me){me.closeButton&&me.addEventListener("onload",function(){var buttonInstance=new baidu.ui.Button({parent:me,classPrefix:me.classPrefix+"-close",skin:me.skin?me.skin+"-close":"",onclick:function(){me.close();},onmousedown:function(e){baidu.event.stopPropagation(e.DOMEvent);},element:me.getTitle(),autoRender:true});me.closeButtonInstance=buttonInstance;me.addEventListener("ondispose",function(){buttonInstance.dispose();});});});baidu.extend(baidu.ui.Dialog.prototype,{coverable:true,coverableOptions:{}});baidu.ui.Dialog.register(function(me){if(me.coverable){me.addEventListeners("onopen,onload",function(){me.Coverable_show();});me.addEventListener("onclose",function(){me.Coverable_hide();});me.addEventListener("onupdate",function(){me.Coverable_update();});}});(function(){var Draggable=baidu.ui.behavior.draggable=function(){this.addEventListener("onload",function(){var me=this;me.dragUpdate();});this.addEventListener("ondispose",function(){var me=this;baidu.un(me._dragOption.handler,"mousedown",me._dragFn);me._dragOption.handler=me.dragHandler=me._lastDragHandler=null;});};Draggable.dragUpdate=function(options){var me=this;options=options||{};if(!me.draggable){return;}
if(me._lastDragHandler&&me._dragFn){baidu.event.un(me._lastDragHandler,"onmousedown",me._dragFn);}
baidu.object.extend(me,options);me._dragOption={ondragstart:function(){me.dispatchEvent("ondragstart");},ondrag:function(){me.dispatchEvent("ondrag");},ondragend:function(){me.dispatchEvent("ondragend");},autoStop:true};me._dragOption.range=me.dragRange||[];me._dragOption.handler=me._lastDragHandler=me.dragHandler||me.getMain();if(me._dragOption.handler){baidu.event.on(me._dragOption.handler,"onmousedown",me._dragFn=function(){baidu.dom.drag(me.dragTarget||me.getMain(),me._dragOption);});}};})();baidu.ui.Dialog.prototype.draggable=true;baidu.ui.Dialog.register(function(me){if(me.draggable){function updateDragRange(){me.dragRange=[0,baidu.page.getWidth(),baidu.page.getHeight(),0];me.dragUpdate();};me.addEventListener("onload",function(){me.dragHandler=me.dragHandler||me.getTitle();if(!me.dragRange){updateDragRange();baidu.on(window,"resize",updateDragRange);}else{me.dragUpdate();}});me.addEventListener("ondragend",function(){me.left=baidu.dom.getStyle(me.getMain(),"left");me.top=baidu.dom.getStyle(me.getMain(),"top");});me.addEventListener("ondispose",function(){baidu.un(window,"resize",updateDragRange);});}});baidu.ui.Dialog.register(function(me){if(me.type=="iframe"){baidu.extend(me,{autoRender:true,tplIframe:"<iframe width='100%' height='97%' frameborder='0' scrolling='no' name='#{name}' id='#{id}' class='#{class}'></iframe>",getIframe:function(){return baidu.g(this.getId('iframe'));}});var contentText,iframeId=me.getId('iframe'),iframeName=me.iframeName||iframeId,iframeElement,contentWindow,contentText=baidu.format(me.tplIframe,{name:iframeName,id:iframeId,'class':me.getClass('iframe')});me.addEventListener("onload",function(){me._update({contentText:contentText});me._updatePosition();iframeElement=baidu.g(iframeId);baidu.on(iframeElement,'onload',function(){me._updatePosition();me.dispatchEvent('onupdate');});iframeElement.src=me.iframeSrc;});}});baidu.extend(baidu.ui.Dialog.prototype,{enableKeyboard:true,closeOnEscape:true});baidu.ui.Dialog.register(function(me){baidu.ui.Dialog.keyboardHandler=baidu.ui.Dialog.keyboardHandler||function(e){e=window.event||e;var keyCode=e.keyCode||e.which,onTop,eachDialog;baidu.object.each(baidu.ui.Dialog.instances,function(item,key){if(item=="show"){eachDialog=baidu.lang.instance(key);if(!onTop||eachDialog.zIndex>onTop.zIndex){onTop=eachDialog;}}});if(onTop){switch(keyCode){case 27:onTop.closeOnEscape&&onTop.close();break;case 13:onTop.dispatchEvent("onenter");break;default:}}};if(me.enableKeyboard&&!baidu.ui.Dialog.keyboardEventReady){baidu.on(document,"keyup",baidu.ui.Dialog.keyboardHandler);baidu.ui.Dialog.keyboardEventReady=true;}
me.addEventListener("ondispose",function(){var noInstance=true;baidu.object.each(baidu.ui.Dialog.instances,function(item,key){noInstance=false;return false;});if(noInstance){baidu.event.un(document,"keyup",baidu.ui.Dialog.keyboardHandler);baidu.ui.Dialog.keyboardEventReady=false;}});});baidu.ui.Modal=baidu.ui.createUI(function(options){var me=this,container=(options&&options.container)?baidu.g(options.container):null;!container&&(container=document.body);if(!container.id){container.id=me.getId('container');}
me.containerId=container.id;me.styles={color:'#000000',opacity:0.6,zIndex:1000};}).extend({uiType:'modal',_showing:false,getContainer:function(){var me=this;return baidu.g(me.containerId);},render:function(){var me=this,modalInstance,fixableInstance,style,main,id=me.containerId,container=baidu.g(me.containerId);if(modalInstance=baidu.ui.Modal.collection[id]){me.mainId=modalInstance.mainId;main=me.getMain();}else{main=me.renderMain();if(container!==document.body){container.appendChild(main);}else{fixableInstance=baidu.dom.fixable(main,{autofix:false,vertival:'top',horizontal:'left',offset:{x:0,y:0}});}
baidu.ui.Modal.collection[id]={mainId:me.mainId,instance:[],flash:{},fixableInstance:fixableInstance};}
me.dispatchEvent('onload');},show:function(options){var me=this,container=me.getContainer(),main=me.getMain(),containerId=me.containerId,modalInstanceOptions=baidu.ui.Modal.collection[containerId],fixableInstance=modalInstanceOptions.fixableInstance,length=modalInstanceOptions.instance.length,lastTop;if(me._showing)
return;if(length>0){lastTop=baidu.lang.instance(modalInstanceOptions.instance[length-1]);lastTop&&lastTop._removeHandler();}
options=options||{};me._show(options.styles||{});if(fixableInstance)
fixableInstance.render();main.style.display='block';modalInstanceOptions.flash[me.guid]=me._hideFlash();modalInstanceOptions.instance.push(me.guid);me._showing=true;me.dispatchEvent('onshow');},_show:function(styles){var me=this;me._getModalStyles(styles||{});me._update();if(me.getContainer()===document.body&&baidu.browser.ie&&baidu.browser.ie<=7){me.windowHandler=me.getWindowHandle();baidu.on(window,'resize',me.windowHandler);}},hide:function(){var me=this;me._hide();me.dispatchEvent('onhide');},_hide:function(){var me=this,containerId=me.containerId,modalInstanceOptions=baidu.ui.Modal.collection[containerId],flash=modalInstanceOptions.flash[me.guid],main=me.getMain(),length=modalInstanceOptions.instance.length,lastTop;if(!me._showing)
return;for(var i=0;i<length;i++){if(modalInstanceOptions.instance[i]==me.guid){modalInstanceOptions.instance.splice(i,1);break;}}
length=modalInstanceOptions.instance.length;if(i==length){me._removeHandler();if(length>0){lastTop=baidu.lang.instance(modalInstanceOptions.instance[length-1]);lastTop&&lastTop._show();}else{main.style.display='none';}
me._restoreFlash(flash);}else{lastTop=baidu.lang.instance(modalInstanceOptions.instance[length-1]);modalInstanceOptions.flash[lastTop.guid]=modalInstanceOptions.flash[lastTop.guid].concat(flash);}
modalInstanceOptions.flash[me.guid]=[];me._showing=false;},_removeHandler:function(){var me=this;if(me.getContainer()===document.body&&baidu.browser.ie&&baidu.browser.ie<=7){baidu.un(window,'resize',me.windowHandler);}},getWindowHandle:function(){var me=this,main=me.getMain();return function(){baidu.setStyles(main,{width:baidu.page.getViewWidth(),height:baidu.page.getViewHeight()});if(me.getContainer()===document.body&&baidu.browser.ie&&baidu.browser.ie<=7){window.top!==window.self&&setTimeout(function(){me._getModalStyles({});me._update();},16);}};},update:function(options){options=options||{};var me=this,main=me.getMain(),modalInstanceOptions=baidu.ui.Modal.collection[me.containerId];options=options||{};baidu.extend(me,options);me._getModalStyles(options.styles||{});me._update();delete(options.styles);baidu.extend(me,options);me.dispatchEvent('onupdate');},_update:function(){var me=this,main=me.getMain();baidu.dom.setStyles(main,me.styles);},_getModalStyles:function(styles){var me=this,main=me.getMain(),container=me.getContainer(),offsetParentPosition,parentPosition,offsetParent;function getStyleNum(d,style){var result=parseInt(baidu.getStyle(d,style));result=isNaN(result)?0:result;result=baidu.lang.isNumber(result)?result:0;return result;}
if(container!==document.body){styles['width']=container.offsetWidth;styles['height']=container.offsetHeight;if(baidu.getStyle(container,'position')=='static'){offsetParent=main.offsetParent||document.body;offsetParentPosition=baidu.dom.getPosition(offsetParent);parentPosition=baidu.dom.getPosition(container);styles['top']=parentPosition.top-offsetParentPosition.top+getStyleNum(offsetParent,'marginTop');styles['left']=parentPosition.left-offsetParentPosition.left+getStyleNum(offsetParent,'marginLeft');}}else{if(baidu.browser.ie>7||!baidu.browser.ie){styles['width']='100%';styles['height']='100%';}else{styles['width']=baidu.page.getViewWidth();styles['height']=baidu.page.getViewHeight();}}
baidu.extend(me.styles,styles);me.styles['backgroundColor']=me.styles['color']||me.styles['backgroundColor'];delete(me.styles['color']);},_hideFlash:function(){var me=this,container=me.getContainer(),elements=container.getElementsByTagName('object'),result=[];baidu.each(elements,function(item){var isWinMode=true;if(baidu.dom.getAncestorBy(item,function(element){if(baidu.getStyle(element,'zIndex')>me.styles.zIndex){return true;}
return false;})){return;}
baidu.each(baidu.dom.children(item),function(param){if(baidu.getAttr(param,'name')=='wmode'&&baidu.getAttr(param,'value')!='window'){isWinMode=false;}});if(isWinMode){result.push([item,baidu.getStyle(item,'visibility')]);item.style.visibility='hidden';}});return result;},_restoreFlash:function(flash){baidu.each(flash,function(item){if(item[0]!=null){item[0].style.visibility=item[1];}});},dispose:function(){var me=this;me._hide();me.dispatchEvent('ondispose');baidu.lang.Class.prototype.dispose.call(me);}});baidu.ui.Modal.collection={};baidu.extend(baidu.ui.Modal.prototype,{coverable:true,coverableOptions:{}});baidu.ui.Modal.register(function(me){if(me.coverable){if(!baidu.browser.isWebkit&&!baidu.browser.isGecko){me.addEventListener("onload",function(){me.Coverable_show();});me.addEventListeners("onshow,onupdate",function(){me.Coverable_update();});me.addEventListener("onhide",function(){me.Coverable_hide();})}}});baidu.extend(baidu.ui.Dialog.prototype,{modal:true,modalColor:"#000000",modalOpacity:0.4,hideModal:function(){var me=this;(me.modal&&me.modalInstance)&&me.modalInstance.hide();}});baidu.ui.Dialog.register(function(me){if(me.modal){me.addEventListener("onopen",function(){if(!me.modalInstance){me.modalInstance=new baidu.ui.Modal({autoRender:true});}
me.modalInstance.show({targetUI:me,styles:{color:me.modalColor,opacity:me.modalOpacity,zIndex:me.modalZIndex?me.modalZIndex:me.zIndex-1}});});me.addEventListener("onclose",me.hideModal);me.addEventListener("ondispose",me.hideModal);}});(function(){var Resizable=baidu.ui.behavior.resizable=function(){};Resizable.resizeableHandle=null;Resizable.resizeCreate=function(options){var me=this,target;options=options||{};if(!me.resizable){return;}
baidu.object.extend(me,options);me._resizeOption={onresizestart:function(){me.dispatchEvent('onresizestart');},onresize:function(styles){me.dispatchEvent('onresize',styles);},onresizeend:function(){me.dispatchEvent('onresizeend');}};baidu.each(['minWidth','minHeight','maxWidth','maxHeight'],function(item,index){me[item]&&(me._resizeOption[item]=me[item]);});me._resizeOption.classPrefix=options.classPrefix||me.classPrefix;target=options.target||me.getBody();me.direction&&(me._resizeOption.direction=me.direction);me.resizeableHandle=baidu.dom.resizable(target,me._resizeOption);};Resizable.resizeUpdate=function(options){this.resizeableHandle.update(options);};Resizable.resizeCancel=function(){this.resizeableHandle.cancel();};Resizable.resizeEnable=function(){this.resizeableHandle.enable();};})();baidu.extend(baidu.ui.Dialog.prototype,{resizable:true,minWidth:100,minHeight:100,direction:['s','e','se']});baidu.ui.Dialog.register(function(me){if(me.resizable){var body,content,main,contentWidth,contentHeight,bodyWidth,bodyHeight;function getValue(){bodyWidth=body.offsetWidth;bodyHeight=body.offsetHeight;contentWidth=content.offsetWidth;contentHeight=content.offsetHeight;}
me.addEventListener('onload',function(){body=me.getBody();main=me.getMain();content=me.getContent();getValue();me.resizeCreate({target:main,classPrefix:me.classPrefix});});me.addEventListener('onresize',function(styles){baidu.dom.setOuterWidth(content,contentWidth+styles.current.width-styles.original.width);baidu.dom.setOuterHeight(content,contentHeight+styles.current.height-styles.original.height);baidu.dom.setOuterWidth(body,bodyWidth+styles.current.width-styles.original.width);baidu.dom.setOuterHeight(body,bodyHeight+styles.current.height-styles.original.height);me.coverable&&me.Coverable_update();});me.addEventListener('onresizeend',function(){getValue();me.width=contentWidth;me.height=contentHeight;baidu.setStyles(main,{height:"",width:""});});me.addEventListener('onupdate',function(){getValue();me.resizeUpdate();});me.addEventListener('onopen',function(){getValue();me.resizeUpdate();});}});baidu.ui.Pager=baidu.ui.createUI(function(options){this._init.apply(this,arguments);}).extend({uiType:'pager',id:'pager',tplHref:'##{page}',tplLabel:'[#{page}]',specialLabelMap:{'first':'首页','last':'尾页','previous':'上一页','next':'下一页'},tplCurrentLabel:'#{page}',tplItem:'<a class="#{class}" page="#{page}" target="_self" href="#{href}">#{label}</a>',tplBody:'<div onclick="#{onclick}" id="#{id}" class="#{class}">#{items}</div>',beginPage:1,endPage:100,itemCount:10,leftItemCount:4,_init:function(options){var me=this;me.update();},update:function(options){var me=this;options=options||{};if(me.checkOptions(options)){if(options.hasOwnProperty('currentPage')&&options.currentPage!=me.currentPage){if(!me._notifyGotoPage(options.currentPage,false)){delete options.currentPage;}}
me._updateNoCheck(options);return true;}
return false;},_updateNoCheck:function(options){var me=this;baidu.object.extend(me,options);if(me.getMain()){me._refresh();}},checkOptions:function(options){var me=this;var begin=options.beginPage||me.beginPage;var end=options.endPage||me.endPage;if(end<=begin){return false;}
if(options.hasOwnProperty('beginPage')&&me.currentPage<begin){me.currentPage=begin;}
if(options.hasOwnProperty('endPage')&&me.currentPage>=end){me.currentPage=end-1;}
var current=options.currentPage||me.currentPage;if(current<begin||current>=end){return false;}
return true;},_genItem:function(page,spec){var me=this;return baidu.string.format(me.tplItem,{"class":spec?me.getClass(spec):'',page:page,href:baidu.string.format(me.tplHref,{page:page}),label:function(){return(spec?(spec=="current"?baidu.string.format(me.tplCurrentLabel,{page:page}):me.specialLabelMap[spec]):baidu.string.format(me.tplLabel,{page:page}));}});},_genBody:function(){var me=this;var begin=me.beginPage;var end=me.endPage;var current=me.currentPage;var numlist=Math.min(end-begin,me.itemCount);var leftcnt=Math.min(current-begin,me.leftItemCount);leftcnt=Math.max(numlist-(end-current),leftcnt);var startPage=current-leftcnt;var pageMap={first:begin,last:end-1,previous:current-1,next:current+1};var spec={};baidu.object.each(pageMap,function(s,k){spec[k]=me._genItem(s,k);});spec.previous=pageMap.previous<begin?'':spec.previous;spec.next=pageMap.next>=end?'':spec.next;spec.first=startPage==begin?'':spec.first;spec.last=startPage+numlist>=end-1?'':spec.last;var buff=[];for(var i=0;i<numlist;i++){var page=startPage+i;buff[i]=me._genItem(page,page==current?"current":null);}
return baidu.string.format(me.tplBody,{id:me.getId(),"class":me.getClass(),items:spec.first+spec.previous+buff.join('')+spec.next+spec.last,onclick:me.getCallRef()+"._handleOnClick(event, this);"});},_refresh:function(){var me=this;me.getMain().innerHTML=me.getString();},_handleOnClick:function(evt){evt=baidu.event.get(evt);var me=this,el=evt.target,page=Number(el.getAttribute('page'));if(page&&me._notifyGotoPage(page,true)){me._updateNoCheck({currentPage:page});}else{evt.preventDefault();}},_notifyGotoPage:function(page,fromClick){return this.dispatchEvent('ongotopage',{page:page,fromClick:fromClick});},ongotopage:function(evt){},getString:function(){var me=this;if(me.currentPage===undefined){me.currentPage=me.beginPage;}
return me._genBody();},render:function(container){var me=this;me.renderMain(container);me.getMain().innerHTML=me.getString();me.update();me.dispatchEvent('onload');},dispose:function(){var me=this;me.dispatchEvent('ondispose');if(me.getMain()){var main=me.getMain();baidu.event.un(main,'click',me._handleOnClick);if(main.parentNode&&main.parentNode.nodeType==1){main.parentNode.removeChild(main);}
me.dispose=null;main=null;baidu.lang.Class.prototype.dispose.call(me);}else{me.addEventListener('onload',function callee(){me.removeEventListener('onload',callee);me.dispose();});}}});baidu.ui.get=function(element){var buid;if(baidu.lang.isString(element)){return baidu.lang.instance(element);}else{do{if(!element||element.nodeType==9){return null;}
if(buid=baidu.dom.getAttr(element,"data-guid")){return baidu.lang.instance(buid);}}while((element=element.parentNode)!=document.body)}};baidu.ui.Suggestion=baidu.ui.createUI(function(options){var me=this;me.addEventListener('onload',function(){baidu.on(document,'mousedown',me.documentMousedownHandler);baidu.on(window,'blur',me.windowBlurHandler);});me.documentMousedownHandler=me._getDocumentMousedownHandler();me.windowBlurHandler=me._getWindowBlurHandler();me.enableIndex=[];me.currentIndex=-1;}).extend({uiType:'suggestion',onbeforepick:new Function,onpick:new Function,onconfirm:new Function,onhighlight:new Function,onshow:new Function,onhide:new Function,getData:function(){return[]},prependHTML:'',appendHTML:'',currentData:{},tplDOM:"<div id='#{0}' class='#{1}' style='position:relative; top:0px; left:0px'></div>",tplPrependAppend:"<div id='#{0}' class='#{1}'>#{2}</div>",tplBody:"<table cellspacing='0' cellpadding='2'><tbody>#{0}</tbody></table>",tplRow:'<tr><td id="#{0}" onmouseover="#{2}" onmouseout="#{3}" onmousedown="#{4}" onclick="#{5}" class="#{6}">#{1}</td></tr>',getString:function(){var me=this;return baidu.format(me.tplDOM,me.getId(),me.getClass(),me.guid);},render:function(target){var me=this,main,target=baidu.g(target);if(me.getMain()||!target){return;}
if(target.id){me.targetId=target.id;}else{me.targetId=target.id=me.getId('input');}
main=me.renderMain();main.style.display='none';main.innerHTML=me.getString();this.dispatchEvent('onload');},_isShowing:function(){var me=this,main=me.getMain();return main&&main.style.display!='none';},pick:function(index){var me=this,currentData=me.currentData,word=currentData&&typeof index=='number'&&typeof currentData[index]!='undefined'?currentData[index].value:index,eventData={data:{item:word==index?{value:index,content:index}:currentData[index],index:index}};if(me.dispatchEvent('onbeforepick',eventData)){me.dispatchEvent('onpick',eventData);}},show:function(word,data,realdata,showEmpty){var i=0,len=data.length,me=this;me.enableIndex=[];me.currentIndex=-1;if(len==0&&!showEmpty){me.hide();}else{me.currentData=[];for(;i<len;i++){if(typeof data[i].value!='undefined'){me.currentData.push(data[i]);}else{me.currentData.push({value:data[i],content:data[i],realdata:realdata[i]});}
if(typeof data[i]['disable']=='undefined'||data[i]['disable']==false){me.enableIndex.push(i);}}
me.getBody().innerHTML=me._getBodyString();me.getMain().style.display='block';me.dispatchEvent('onshow');}},hide:function(){var me=this;if(!me._isShowing())
return;me.getMain().style.display='none';me.dispatchEvent('onhide');},highLight:function(index){var me=this,enableIndex=me.enableIndex,item=null;if(!me._isEnable(index))return;me.currentIndex>=0&&me._clearHighLight();item=me._getItem(index);baidu.addClass(item,me.getClass('current'));me.currentIndex=baidu.array.indexOf(enableIndex,index);me.dispatchEvent('onhighlight',{index:index,data:me.getDataByIndex(index)});},clearHighLight:function(){var me=this,currentIndex=me.currentIndex,index=me.enableIndex[currentIndex];me._clearHighLight()&&me.dispatchEvent('onclearhighlight',{index:index,data:me.getDataByIndex(index)});},_clearHighLight:function(){var me=this,currentIndex=me.currentIndex,enableIndex=me.enableIndex,item=null;if(currentIndex>=0){item=me._getItem(enableIndex[currentIndex]);baidu.removeClass(item,me.getClass('current'));me.currentIndex=-1;return true;}
return false;},confirm:function(index,source){var me=this;if(source!='keyboard'){if(!me._isEnable(index))return;}
me.pick(index);me.dispatchEvent('onconfirm',{data:me.getDataByIndex(index)||index,source:source});me.currentIndex=-1;me.hide();},getDataByIndex:function(index){return{item:this.currentData[index],index:index};},getTargetValue:function(){return this.getTarget().value;},getTarget:function(){return baidu.g(this.targetId);},_getItem:function(index){return baidu.g(this.getId('item'+index));},_getBodyString:function(){var me=this,html='',itemsHTML=[],data=me.currentData,len=data.length,i=0;function getPrependAppend(name){return baidu.format(me.tplPrependAppend,me.getId(name),me.getClass(name),me[name+'HTML']);}
html+=getPrependAppend('prepend');for(;i<len;i++){itemsHTML.push(baidu.format(me.tplRow,me.getId('item'+i),data[i].content,me.getCallRef()+'._itemOver(event, '+i+')',me.getCallRef()+'._itemOut(event, '+i+')',me.getCallRef()+'._itemDown(event, '+i+')',me.getCallRef()+'._itemClick(event, '+i+')',(typeof data[i]['disable']=='undefined'||data[i]['disable']==false)?'':me.getClass('disable')));}
html+=baidu.format(me.tplBody,itemsHTML.join(''));html+=getPrependAppend('append');return html;},_itemOver:function(e,index){var me=this;baidu.event.stop(e||window.event);me._isEnable(index)&&me.highLight(index);me.dispatchEvent('onmouseoveritem',{index:index,data:me.getDataByIndex(index)});},_itemOut:function(e,index){var me=this;baidu.event.stop(e||window.event);me._isEnable(index)&&me.clearHighLight();me.dispatchEvent('onmouseoutitem',{index:index,data:me.getDataByIndex(index)});},_itemDown:function(e,index){var me=this;baidu.event.stop(e||window.event);me.dispatchEvent('onmousedownitem',{index:index,data:me.getDataByIndex(index)});},_itemClick:function(e,index){var me=this;baidu.event.stop(e||window.event);me.dispatchEvent('onitemclick',{index:index,data:me.getDataByIndex(index)});me._isEnable(index)&&me.confirm(index,'mouse');},_isEnable:function(index){var me=this;return baidu.array.contains(me.enableIndex,index);},_getDocumentMousedownHandler:function(){var me=this;return function(e){e=e||window.event;var element=e.target||e.srcElement,ui=baidu.ui.get(element);if(element==me.getTarget()||(ui&&ui.uiType==me.uiType)){return;}
me.hide();};},_getWindowBlurHandler:function(){var me=this;return function(){me.hide();};},dispose:function(){var me=this;me.dispatchEvent('dispose');baidu.un(document,'mousedown',me.documentMousedownHandler);baidu.un(window,'blur',me.windowBlurHandler);baidu.dom.remove(me.mainId);baidu.lang.Class.prototype.dispose.call(this);}});baidu.extend(baidu.ui.Suggestion.prototype,{coverable:true,coverableOptions:{}});baidu.ui.Suggestion.register(function(me){if(me.coverable){me.addEventListener('onshow',function(){me.Coverable_show();});me.addEventListener('onhide',function(){me.Coverable_hide();});}});baidu.ui.Suggestion.extend({setData:function(word,data,noShow){var me=this;me.dataCache[word]=data;if(!noShow){me.show(word,me.dataCache[word]);}}});baidu.ui.Suggestion.register(function(me){me.dataCache={},me.addEventListener('onneeddata',function(ev,word){var dataCache=me.dataCache;if(typeof dataCache[word]=='undefined'){me.getData(word);}else{me.show(word,dataCache[word]);}});});(function(){var Posable=baidu.ui.behavior.posable=function(){};Posable.setPosition=function(coordinate,element,options){element=baidu.g(element)||this.getMain();options=options||{};var me=this,args=[element,coordinate,options];me.__execPosFn(element,'_positionByCoordinate',options.once,args);};Posable._positionByCoordinate=function(source,coordinate,options,_scrollJustify){coordinate=coordinate||[0,0];options=options||{};var me=this,elementStyle={},cH=baidu.page.getViewHeight(),cW=baidu.page.getViewWidth(),scrollLeft=baidu.page.getScrollLeft(),scrollTop=baidu.page.getScrollTop(),sourceWidth=source.offsetWidth,sourceHeight=source.offsetHeight,offsetParent=source.offsetParent,parentPos=(!offsetParent||offsetParent==document.body)?{left:0,top:0}:baidu.dom.getPosition(offsetParent);options.position=(typeof options.position!=='undefined')?options.position.toLowerCase():'bottomright';coordinate=_formatCoordinate(coordinate||[0,0]);options.offset=_formatCoordinate(options.offset||[0,0]);coordinate.x+=(options.position.indexOf('right')>=0?(coordinate.width||0):0);coordinate.y+=(options.position.indexOf('bottom')>=0?(coordinate.height||0):0);elementStyle.left=coordinate.x+options.offset.x-parentPos.left;elementStyle.top=coordinate.y+options.offset.y-parentPos.top;switch(options.insideScreen){case"surround":elementStyle.left+=elementStyle.left<scrollLeft?sourceWidth+(coordinate.width||0):((elementStyle.left+sourceWidth)>(scrollLeft+cW)?-sourceWidth-(coordinate.width||0):0);elementStyle.top+=elementStyle.top<scrollTop?sourceHeight+(coordinate.height||0):((elementStyle.top+sourceHeight)>(scrollTop+cH)?-sourceHeight-(coordinate.height||0):0);break;case'fix':elementStyle.left=Math.max(0-parseFloat(baidu.dom.getStyle(source,'marginLeft'))||0,Math.min(elementStyle.left,baidu.page.getViewWidth()-sourceWidth-parentPos.left));elementStyle.top=Math.max(0-parseFloat(baidu.dom.getStyle(source,'marginTop'))||0,Math.min(elementStyle.top,baidu.page.getViewHeight()-sourceHeight-parentPos.top));break;case'verge':var offset={width:(options.position.indexOf('right')>-1?coordinate.width:0),height:(options.position.indexOf('bottom')>-1?coordinate.height:0)},optOffset={width:(options.position.indexOf('bottom')>-1?coordinate.width:0),height:(options.position.indexOf('right')>-1?coordinate.height:0)};elementStyle.left-=(options.position.indexOf('right')>=0?(coordinate.width||0):0);elementStyle.top-=(options.position.indexOf('bottom')>=0?(coordinate.height||0):0);elementStyle.left+=elementStyle.left+offset.width+sourceWidth-scrollLeft>cW-parentPos.left?optOffset.width-sourceWidth:offset.width;elementStyle.top+=elementStyle.top+offset.height+sourceHeight-scrollTop>cH-parentPos.top?optOffset.height-sourceHeight:offset.height;break;}
baidu.dom.setPosition(source,elementStyle);if(!_scrollJustify&&(cH!=baidu.page.getViewHeight()||cW!=baidu.page.getViewWidth())){me._positionByCoordinate(source,coordinate,{},true);}
_scrollJustify||me.dispatchEvent('onpositionupdate');};Posable.__execPosFn=function(element,fnName,once,args){var me=this;if(typeof once=='undefined'||!once){baidu.event.on(baidu.dom.getWindow(element),'resize',baidu.fn.bind.apply(me,[fnName,me].concat([].slice.call(args))));}
me[fnName].apply(me,args);};function _formatCoordinate(coordinate){coordinate.x=coordinate[0]||coordinate.x||coordinate.left||0;coordinate.y=coordinate[1]||coordinate.y||coordinate.top||0;return coordinate;}})();baidu.ui.Suggestion.extend({posable:true,fixWidth:true,getWindowResizeHandler:function(){var me=this;return function(){me.adjustPosition(true);};},adjustPosition:function(onlyAdjustShown){var me=this,target=me.getTarget(),targetPosition,main=me.getMain(),pos;if(!me._isShowing()&&onlyAdjustShown){return;}
targetPosition=baidu.dom.getPosition(target),pos={top:(targetPosition.top+target.offsetHeight-1),left:targetPosition.left,width:target.offsetWidth};pos=typeof me.view=='function'?me.view(pos):pos;me.setPosition([pos.left,pos.top],null,{once:true});baidu.dom.setOuterWidth(main,pos.width);}});baidu.ui.Suggestion.register(function(me){me.windowResizeHandler=me.getWindowResizeHandler();me.addEventListener('onload',function(){me.adjustPosition();if(me.fixWidth){me.fixWidthTimer=setInterval(function(){var main=me.getMain(),target=me.getTarget();if(main.offsetWidth!=0&&target&&target.offsetWidth!=main.offsetWidth){me.adjustPosition();main.style.display='block';}},100);}
baidu.on(window,'resize',me.windowResizeHandler);});me.addEventListener('onshow',function(){me.adjustPosition();});me.addEventListener('ondispose',function(){baidu.un(window,'resize',me.windowResizeHandler);clearInterval(me.fixWidthTimer);});});baidu.ui.Suggestion.register(function(me){var target,oldValue='',keyValue,pickValue,mousedownView=false,stopCircleTemporary=false;me.addEventListener('onload',function(){target=this.getTarget();keyValue=target.value;me.targetKeydownHandler=me.getTargetKeydownHandler();baidu.on(target,'keydown',me.targetKeydownHandler);target.setAttribute('autocomplete','off');me.circleTimer=setInterval(function(){if(stopCircleTemporary){return;}
if(baidu.g(target)==null){me.dispose();}
var nowValue=target.value;if(nowValue==oldValue&&nowValue!=''&&nowValue!=keyValue&&nowValue!=pickValue){if(me.requestTimer==0){me.requestTimer=setTimeout(function(){me.dispatchEvent('onneeddata',nowValue);},100);}}else{clearTimeout(me.requestTimer);me.requestTimer=0;if(nowValue==''&&oldValue!=''){pickValue='';me.hide();}
oldValue=nowValue;if(nowValue!=pickValue){me.defaultIptValue=nowValue;}
if(keyValue!=target.value){keyValue='';}}},10);baidu.on(target,'beforedeactivate',me.beforedeactivateHandler);});me.addEventListener('onitemclick',function(){stopCircleTemporary=false;me.defaultIptValue=oldValue=me.getTargetValue();});me.addEventListener('onpick',function(event){if(mousedownView)
target.blur();target.value=pickValue=event.data.item.value;if(mousedownView)
target.focus();});me.addEventListener('onmousedownitem',function(e){mousedownView=true;stopCircleTemporary=true;setTimeout(function(){stopCircleTemporary=false;mousedownView=false;},500);});me.addEventListener('ondispose',function(){baidu.un(target,'keydown',me.targetKeydownHandler);baidu.un(target,'beforedeactivate',me.beforedeactivateHandler);clearInterval(me.circleTimer);});});baidu.ui.Suggestion.extend({beforedeactivateHandler:function(){return function(){if(mousedownView){window.event.cancelBubble=true;window.event.returnValue=false;}};},getTargetKeydownHandler:function(){var me=this;function keyUpDown(up){if(!me._isShowing()){me.dispatchEvent('onneeddata',me.getTargetValue());return;}
var enableIndex=me.enableIndex,currentIndex=me.currentIndex;if(enableIndex.length==0)return;if(up){switch(currentIndex){case-1:currentIndex=enableIndex.length-1;me.pick(enableIndex[currentIndex]);me.highLight(enableIndex[currentIndex]);break;case 0:currentIndex=-1;me.pick(me.defaultIptValue);me.clearHighLight();break;default:currentIndex--;me.pick(enableIndex[currentIndex]);me.highLight(enableIndex[currentIndex]);break;}}else{switch(currentIndex){case-1:currentIndex=0;me.pick(enableIndex[currentIndex]);me.highLight(enableIndex[currentIndex]);break;case enableIndex.length-1:currentIndex=-1;me.pick(me.defaultIptValue);me.clearHighLight();break;default:currentIndex++;me.pick(enableIndex[currentIndex]);me.highLight(enableIndex[currentIndex]);break;}}
me.currentIndex=currentIndex;}
return function(e){var up=false,index;e=e||window.event;switch(e.keyCode){case 9:case 27:me.hide();break;case 13:baidu.event.stop(e);me.confirm(me.currentIndex==-1?me.getTarget().value:me.enableIndex[me.currentIndex],'keyboard');break;case 38:up=true;case 40:baidu.event.stop(e);keyUpDown(up);break;default:me.currentIndex=-1;}};},defaultIptValue:''});baidu.ui.behavior.posable.setPositionByElement=function(target,element,options){target=baidu.g(target);element=baidu.g(element)||this.getMain();options=options||{};this.__execPosFn(element,'_setPositionByElement',options.once,arguments);};baidu.ui.behavior.posable._setPositionByElement=function(target,element,options){var targetPos=baidu.dom.getPosition(target);options.once=false;options.insideScreen=options.insideScreen||'verge';targetPos.width=target.offsetWidth;targetPos.height=target.offsetHeight;this._positionByCoordinate(element,targetPos,options,true);};baidu.ui.behavior.posable.setPositionByMouse=function(element,options){var me=this;element=baidu.g(element)||me.getMain();me._positionByCoordinate(element,baidu.page.getMousePosition(),options);};baidu.ui.Tooltip=baidu.ui.createUI(function(options){var me=this;me.target=me.getTarget();me.offset=options.offset||[0,0];me.positionElement=null;baidu.ui.Tooltip.showing[me.guid]=me;}).extend({uiType:'tooltip',width:'',height:'',zIndex:3000,currentTarget:null,type:'click',posable:true,positionBy:'element',offsetPosition:'bottomright',isShowing:false,tplBody:'<div id="#{id}" class="#{class}"></div>',getString:function(){var me=this;return baidu.format(me.tplBody,{id:me.getId(),'class':me.getClass()});},toggle:function(){return true},render:function(){var me=this,main,title;main=me.renderMain();baidu.each(me.target,function(t,index){if((title=baidu.getAttr(t,'title'))&&title!=''){baidu.setAttr(t,'tangram-tooltip-title',title);baidu.setAttr(t,'title','');}});baidu.dom.insertHTML(main,"beforeend",me.getString());me._update();me._close();me.dispatchEvent('onload');},open:function(target){var me=this,showTooltip=baidu.ui.Tooltip.showing,isSingleton=baidu.ui.Tooltip.isSingleton,target=target||me.target[0],currentTarget=me.currentTarget,body=me.getBody();if(currentTarget===target)return;me.isShowing&&me.close(currentTarget);if(isSingleton){baidu.object.each(showTooltip,function(tooltip,key){if(key!=me.guid&&tooltip.isShowing){tooltip.close();}});}
if(typeof me.toggle=='function'&&!me.toggle())return;me.currentTarget=target;me._updateBodyByTitle();me._setPosition();me.isShowing=true;if(me.dispatchEvent('onbeforeopen')){me.dispatchEvent('open');return;}},_updateBody:function(options){var me=this,options=options||{},body=me.getBody(),title;if(me.contentElement&&me.contentElement!==body.firstChild){body.innerHTML='';body.appendChild(me.contentElement);me.contentElement=body.firstChild;}else if(typeof options.contentElement!='undefined'){body.innerHTML='';options.contentElement!=null&&body.appendChild(options.contentElement);}
if(!options.contentElement){if(typeof options.content=='string'){body.innerHTML='';body.innerHTML=options.content;}else if(typeof me.content=='string'&&baidu.dom.children(body).length==0){body.innerHTML=me.content;}}},_updateBodyByTitle:function(){var me=this,body=me.getBody();if(!me.contentElement&&!me.content&&me.currentTarget){if((title=baidu.getAttr(me.currentTarget,'tangram-tooltip-title'))&&title!=''){body.innerHTML=title;}else{body.innerHTML='';}}},_update:function(options){var me=this,options=options||{},main=me.getMain(),body=me.getBody();me._updateBody(options);baidu.object.extend(me,options);me.contentElement=baidu.dom.children(body).length>0?body.firstChild:null;me._updateBodyByTitle();baidu.dom.setStyles(main,{zIndex:me.zIndex,width:me.width,height:me.height,display:''});},update:function(options){var me=this;me._update(options);me._setPosition();me.dispatchEvent('onupdate');},_setPosition:function(){var me=this,insideScreen=typeof me.insideScreen=='string'?me.insideScreen:'surround',positionOptions={once:true,offset:me.offset,position:me.offsetPosition,insideScreen:insideScreen};switch(me.positionBy){case'element':me.setPositionByElement(me.positionElement||me.currentTarget,me.getMain(),positionOptions);break;case'mouse':me.setPositionByMouse(me.getMain(),positionOptions);break;default:break;}},close:function(){var me=this;if(!me.isShowing)return;me.isShowing=false;if(me.dispatchEvent('onbeforeclose')){me._close();me.dispatchEvent('onclose');}
me.currentTarget=null;},_close:function(){var me=this;me.getMain().style.left='-100000px';},dispose:function(){var me=this;me.dispatchEvent('ondispose');if(me.getMain()){baidu.dom.remove(me.getMain());}
delete(baidu.ui.Tooltip.showing[me.guid]);baidu.lang.Class.prototype.dispose.call(me);},getTarget:function(){var me=this,target=[];baidu.each(baidu.lang.toArray(me.target),function(item){target.push(baidu.G(item));});return target;}});baidu.ui.Tooltip.isSingleton=false;baidu.ui.Tooltip.showing={};baidu.ui.Tooltip.register(function(me){if(me.type=='click'){me.addEventListener("onload",function(){baidu.each(me.target,function(target){baidu.on(target,'click',showFn);});});me.addEventListener("ondispose",function(){baidu.each(me.target,function(target){baidu.un(target,'click',showFn);});baidu.un(document,'click',hideFn);});me.addEventListener('onopen',function(){baidu.un(me.currentTarget,'click',showFn);baidu.on(me.currentTarget,'click',hideFn);baidu.on(document,'click',hideFn);});me.addEventListener('onclose',function(){baidu.on(me.currentTarget,'click',showFn);baidu.un(me.currentTarget,'click',hideFn);baidu.un(document,'click',hideFn);});function showFn(e){me.open(this);baidu.event.stop(e||window.event);}
function hideFn(e){var target=baidu.event.getTarget(e||window.event),judge=function(el){return me.getBody()==el;};if(judge(target)||baidu.dom.getAncestorBy(target,judge)||baidu.ui.get(target)==me){return;}
me.close();baidu.event.stop(e||window.event);}}});baidu.ui.Tooltip.extend({headContent:'',tplhead:'<div class="#{headClass}" id="#{id}">#{headContent}</div>'});baidu.ui.Tooltip.register(function(me){me.addEventListener('onload',function(){var me=this,button;baidu.dom.insertHTML(me.getBody(),'afterBegin',baidu.format(me.tplhead,{headClass:me.getClass('head'),id:me.getId('head')}));button=new baidu.ui.Button({content:me.headContent,onclick:function(){me.close();}});button.render(me.getId('head'));});});baidu.fx=baidu.fx||{};baidu.fx.Timeline=baidu.lang.createClass(function(options){baidu.object.extend(this,baidu.fx.Timeline.options);baidu.object.extend(this,options);},{className:"baidu.fx.Timeline",options:{interval:16,duration:500,dynamic:true}}).extend({launch:function(){var me=this;me.dispatchEvent("onbeforestart");typeof me.initialize=="function"&&me.initialize();me["\x06btime"]=new Date().getTime();me["\x06etime"]=me["\x06btime"]+(me.dynamic?me.duration:0);me["\x06pulsed"]();return me;},"\x06pulsed":function(){var me=this;var now=new Date().getTime();me.percent=(now-me["\x06btime"])/me.duration;me.dispatchEvent("onbeforeupdate");if(now>=me["\x06etime"]){typeof me.render=="function"&&me.render(me.transition(me.percent=1));typeof me.finish=="function"&&me.finish();me.dispatchEvent("onafterfinish");me.dispose();return;}
typeof me.render=="function"&&me.render(me.transition(me.percent));me.dispatchEvent("onafterupdate");me["\x06timer"]=setTimeout(function(){me["\x06pulsed"]()},me.interval);},transition:function(percent){return percent;},cancel:function(){this["\x06timer"]&&clearTimeout(this["\x06timer"]);this["\x06etime"]=this["\x06btime"];typeof this.restore=="function"&&this.restore();this.dispatchEvent("oncancel");this.dispose();},end:function(){this["\x06timer"]&&clearTimeout(this["\x06timer"]);this["\x06etime"]=this["\x06btime"];this["\x06pulsed"]();}});baidu.fx.create=function(element,options,fxName){var timeline=new baidu.fx.Timeline(options);timeline.element=element;timeline._className=fxName||timeline._className;timeline["\x06original"]={};var catt="baidu_current_effect";timeline.addEventListener("onbeforestart",function(){var me=this,guid;me.attribName="att_"+me._className.replace(/\W/g,"_");guid=me.element.getAttribute(catt);me.element.setAttribute(catt,(guid||"")+"|"+me.guid+"|",0);if(!me.overlapping){(guid=me.element.getAttribute(me.attribName))&&window[baidu.guid]._instances[guid].cancel();me.element.setAttribute(me.attribName,me.guid,0);}});timeline["\x06clean"]=function(e){var me=this,guid;if(e=me.element){e.removeAttribute(me.attribName);guid=e.getAttribute(catt);guid=guid.replace("|"+me.guid+"|","");if(!guid)e.removeAttribute(catt);else e.setAttribute(catt,guid,0);}};timeline.addEventListener("oncancel",function(){this["\x06clean"]();this["\x06restore"]();});timeline.addEventListener("onafterfinish",function(){this["\x06clean"]();this.restoreAfterFinish&&this["\x06restore"]();});timeline.protect=function(key){this["\x06original"][key]=this.element.style[key];};timeline["\x06restore"]=function(){var o=this["\x06original"],s=this.element.style,v;for(var i in o){v=o[i];if(typeof v=="undefined")continue;s[i]=v;if(!v&&s.removeAttribute)s.removeAttribute(i);else if(!v&&s.removeProperty)s.removeProperty(i);}};return timeline;};baidu.fx.opacity=function(element,options){if(!(element=baidu.dom.g(element)))return null;options=baidu.object.extend({from:0,to:1},options||{});var e=element;var fx=baidu.fx.create(e,baidu.object.extend({initialize:function(){baidu.dom.show(element);if(baidu.browser.ie){this.protect("filter");}else{this.protect("opacity");this.protect("KHTMLOpacity");}
this.distance=this.to-this.from;},render:function(schedule){var n=this.distance*schedule+this.from;if(!baidu.browser.ie){e.style.opacity=n;e.style.KHTMLOpacity=n;}else{e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(n*100)+")";}}},options),"baidu.fx.opacity");return fx.launch();};baidu.fx.fadeIn=function(element,options){if(!(element=baidu.dom.g(element)))return null;var fx=baidu.fx.opacity(element,baidu.object.extend({from:0,to:1,restoreAfterFinish:true},options||{}));fx._className="baidu.fx.fadeIn";return fx;};baidu.fx.fadeOut=function(element,options){if(!(element=baidu.dom.g(element)))return null;var fx=baidu.fx.opacity(element,baidu.object.extend({from:1,to:0,restoreAfterFinish:true},options||{}));fx.addEventListener("onafterfinish",function(){baidu.dom.hide(this.element);});fx._className="baidu.fx.fadeOut";return fx;};baidu.fx.collapse=function(element,options){if(!(element=baidu.dom.g(element)))return null;var e=element,value,attr,attrHV={"vertical":{value:'height',offset:'offsetHeight',stylesValue:["paddingBottom","paddingTop","borderTopWidth","borderBottomWidth"]},"horizontal":{value:'width',offset:'offsetWidth',stylesValue:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}};var fx=baidu.fx.create(e,baidu.object.extend({orientation:'vertical',initialize:function(){attr=attrHV[this.orientation];this.protect(attr.value);this.protect("overflow");this.restoreAfterFinish=true;value=e[attr.offset];e.style.overflow="hidden";},transition:function(percent){return Math.pow(1-percent,2);},render:function(schedule){e.style[attr.value]=Math.floor(schedule*value)+"px";},finish:function(){baidu.dom.hide(e);}},options||{}),"baidu.fx.expand_collapse");return fx.launch();};baidu.ui.Tooltip.extend({enableFx:true,showFx:baidu.fx.fadeIn,showFxOptions:{duration:500},hideFx:baidu.fx.fadeOut,hideFxOptions:{duration:500}});baidu.ui.Tooltip.register(function(me){if(me.enableFx){var fxHandle=null;me.addEventListener('beforeopen',function(e){me.dispatchEvent('onopen');'function'==typeof me.showFx&&me.showFx(me.getMain(),me.showFxOptions);e.returnValue=false;});me.addEventListener('beforeclose',function(e){me.dispatchEvent('onclose');fxHandle=me.hideFx(me.getMain(),me.hideFxOptions);fxHandle.addEventListener('onafterfinish',function(){me._close();});e.returnValue=false;});me.addEventListener('ondispose',function(){fxHandle&&fxHandle.end();});}});baidu.ui.Tooltip.extend({hideDelay:500});baidu.ui.Tooltip.register(function(me){if(me.type=='hover'){var hideHandle=null;me.addEventListener("onload",function(){baidu.each(me.target,function(target){baidu.on(target,'mouseover',showFn);});});me.addEventListener("ondispose",function(){baidu.each(me.target,function(target){baidu.un(target,'mouseover',showFn);baidu.un(target,'mouseout',hideFn);});});me.addEventListener('onopen',function(){baidu.on(me.currentTarget,'mouseout',hideFn);});me.addEventListener('onclose',function(){baidu.on(me.currentTarget,'mouseover',showFn);baidu.un(me.currentTarget,'mouseout',hideFn);});function showFn(e){hideHandle&&clearTimeout(hideHandle);me.open(this);baidu.event.stop(e||window.event);}
function hideFn(e){hideHandle=setTimeout(function(){me.close();},me.hideDelay);baidu.event.stop(e||window.event);}}});